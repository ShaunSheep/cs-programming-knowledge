
#  数据流中第一个唯一的数字 

## 题目链接

[数据流中第一个唯一的数字](https://www.lintcode.com/problem/685/) <br>
[数据流中第一个唯一的数字-leetocde](https://leetcode-cn.com/problems/first-unique-number/)

## 题目描述

描述

给一个连续的数据流,写一个函数返回终止数字到达时的第一个唯一数字（包括终止数字）,如果找不到这个终止数字, 返回 `-1`.

样例

**样例1**

```
输入： 
[1, 2, 2, 1, 3, 4, 4, 5, 6]
5
输出： 3
```

**样例2**

```
输入：
[1, 2, 2, 1, 3, 4, 4, 5, 6]
7
输出： -1
```

**样例3**

```
输入：
[1, 2, 2, 1, 3, 4]
3
输出： 3
```

## 解题思路

| <div style="width:70pt">方法</div>  |描述 |<div style="width:70pt">时间复杂度</div> |<div style="width:70pt">空间复杂度</div>|
|---|---|---|---|
|  暴力法 | 下文代码实现  | $O(1)$|$(1)$|

使用 Hash & Linked List 处理 Data Stream 的问题

## 代码实现

```java
class DataStream {
    private ListNode head, tail;
    private Map<Integer, ListNode> numToPrev;
    private Set<Integer> duplicates; 
    
    public DataStream() {
        // dummy
        head = new ListNode(0);
        tail = head;
        
        numToPrev = new HashMap<>();
        duplicates = new HashSet<>();
    }
    
    private void remove(int number) {
        ListNode prev = numToPrev.get(number);
        prev.next = prev.next.next;
        numToPrev.remove(number);
        
        // change tail and prev of next
        if (prev.next != null) {
            numToPrev.put(prev.next.val, prev);
        } else {
            tail = prev;
        }
    }
    
    public void add(int number) {
        if (duplicates.contains(number)) {
            return;
        }
        
        if (numToPrev.containsKey(number)) {
            remove(number);
            duplicates.add(number);
        } else {
            ListNode node = new ListNode(number);
            numToPrev.put(number, tail);
            tail.next = node;
            tail = node;
        }
    }
    
    public int firstUnique() {
        if (head.next != null) {
            return head.next.val;
        }
        return -1;
    } 
}

public class Solution {
    /**
     * @param nums: a continuous stream of numbers
     * @param number: a number
     * @return: returns the first unique number
     */
    public int firstUniqueNumber(int[] nums, int number) {
        DataStream ds = new DataStream();
        for (int i = 0; i < nums.length; i++) {
            ds.add(nums[i]);
            if (nums[i] == number) {
                return ds.firstUnique();
            }
        }
        
        return -1;
    }
}
```

